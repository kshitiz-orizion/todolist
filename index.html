<!DOCTYPE html>
<html>
<head>
	<title>TODO LIST</title>
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
	
</head>
<body>
<div ng-app="myApp" ng-controller="myCtrl">
	<!-- <button type="submit" class="btn btn-default" value="POST" ng-click="addtodo()">Add todo</button>
	<div ng-show="showMe">
		<h1>HI MAIN PAGE</h1>
	</div>
	<div ng-hide="showMe">
		<h1>Add Todo page</h1>
	</div> -->
	<div class="container">

	
	<table>
		<tr class="border">
			<th>ID</th>
			<th>TASK</th>
		</tr>

		<tr ng-repeat="eachItem in todo" class="border">
			<td style="font-size: 14px; text-align: left" >{{eachItem.id}}</td>
			<td style="font-size: 14px; text-align: left" >{{eachItem.task}}</td>
		</tr>
	</table>
</div>
	<div class="container">
  <button type="button" class="btn btn-info btn-lg" data-toggle="modal" data-target="#myModal">Add todo</button>

  <div class="modal fade" id="myModal" role="dialog">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal">&times;</button>
          <h4 class="modal-title">Add Todo</h4>
        </div>
        <div class="modal-body">
          <form>
  			<div class="form-group">
   				 <label >Enter ID</label>
    			<input type="text" class="form-control" placeholder="ID" name="id"  ng-required="required" ng-model="todo1.id">
  			</div>
  			<div class="form-group">
    			<label >Enter Task</label>
    			<input type="text" class="form-control"  placeholder="TASK" name="task" ng-required="required" ng-model="todo1.task">
  			</div>
  			
  			<button type="submit" name="submit" class="btn btn-default" value="POST" ng-click="submittodo()">Submit</button>
		</form>
        </div>
      </div>
      
    </div>
  </div>
  
</div>
</div>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>	
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
<script type="text/javascript" src="bower_components/angular/angular.js"></script>	
<script>
	var app = angular.module('myApp', []);
	app.config(['$qProvider', function ($qProvider) {
    $qProvider.errorOnUnhandledRejections(false);
}]);
app.controller('myCtrl',['$scope','$window','$http','$location',function($scope, $window,$http,$location){

    $scope.submittodo=function(){
        console.log($scope.todo1);
        $http.post('http://localhost:3000/posttodo',$scope.todo1);
            $window.location.reload();
         alert('Task Added');
    };

    $http.get('http://localhost:3000/gettodo').then(function successCallback(response) {
        $scope.todo=response.data;
  	},
  function errorCallback(response) {
      alert(response);
  });


}]);
</script>
</body>
</html>